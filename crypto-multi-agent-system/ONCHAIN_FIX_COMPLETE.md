# üéØ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø OnChain –ê–ù–ê–õ–ò–ó–ê - –§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø

## üìã **–ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï**

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ **–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º:
- OnChain –∞–Ω–∞–ª–∏–∑ –≤–æ–∑–≤—Ä–∞—â–µ–Ω –Ω–∞ **–£–†–û–í–ï–ù–¨ 2** (–¥–µ—à–µ–≤—ã–π, –º–∞—Å—Å–æ–≤—ã–π, –≥–ª—É–±–æ–∫–∏–π)
- CoinGecko/GoPlus –Ω–∞ **–£–†–û–í–ù–ï 3** (–¥–æ—Ä–æ–≥–æ–π, —Ç–æ–ª—å–∫–æ –¥–ª—è –ª—É—á—à–∏—Ö)
- –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ OnChain –∞–Ω–∞–ª–∏–∑–∞
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç API calls

---

## üîß **–°–î–ï–õ–ê–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω OnChainAgent - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–¥—Å—á–µ—Ç API calls**

**–§–∞–π–ª**: `agents/onchain/onchain_agent.py`

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `api_calls_used` –≤ `OnChainAnalysisResult`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–¥—Å—á–µ—Ç RPC/Etherscan calls –≤ –º–µ—Ç–æ–¥–µ `analyze_token`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ mock —Ä–µ–∂–∏–º–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 calls)
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞

**–ü—Ä–∏–º–µ—Ä:**
```python
@dataclass
class OnChainAnalysisResult:
    lp_analysis: Optional[LiquidityAnalysis]
    holder_analysis: Optional[HolderAnalysis]
    overall_risk: str
    recommendation: str
    analysis_errors: List[str]
    api_calls_used: int = 0  # ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
```

---

### **2. –û—Ç–∫–ª—é—á–µ–Ω mock —Ä–µ–∂–∏–º –≤ SimpleOrchestrator**

**–§–∞–π–ª**: `agents/orchestrator/simple_orchestrator.py`

**–ë—ã–ª–æ:**
```python
self.onchain_agent = OnChainAgent(mock_mode=True)  # ‚ùå MOCK
```

**–°—Ç–∞–ª–æ:**
```python
self.onchain_agent = OnChainAgent(mock_mode=False)  # ‚úÖ REAL MODE
```

---

### **3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–æ—Ä–æ–Ω–∫–∏**

**–§–∞–π–ª**: `agents/orchestrator/simple_orchestrator.py`

## **–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (—Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º):**

### **–£–†–û–í–ï–ù–¨ 1: Discovery** (TheGraph)
- üÜì **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ**
- üîç –ú–∞—Å—Å–æ–≤—ã–π –ø–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
- üìä Preliminary scoring –Ω–∞ –æ—Å–Ω–æ–≤–µ discovery metrics

### **–£–†–û–í–ï–ù–¨ 2: OnChain Analysis** (RPC/Etherscan)
- üí∞ **–î–µ—à–µ–≤–æ** (~100 RPC calls)
- üõ°Ô∏è **–ì–õ–£–ë–û–ö–ò–ô** –∞–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
  - LP –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (liquidity lock)
  - –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–π (holder concentration)
  - –†–∏—Å–∫–∏ rug pull
- üî• **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä**: –£–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω—ã —Å CRITICAL —Ä–∏—Å–∫–æ–º
- üìà –ú–∞—Å—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ 20+ —Ç–æ–∫–µ–Ω–æ–≤

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
```python
# –ê–Ω–∞–ª–∏–∑ LP –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
locked_percentage = lp_analysis.locked_percentage + lp_analysis.dead_percentage
if locked_percentage > 90%:
    risk_level = "SAFE"  # ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ rug pull
```

```python
# –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–π
if top_10_concentration < 20%:
    risk_level = "LOW"  # ‚úÖ –ó–¥–æ—Ä–æ–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
elif top_10_concentration > 40%:
    risk_level = "HIGH"  # ‚ö†Ô∏è –†–∏—Å–∫ –¥–∞–º–ø–∞
```

### **–£–†–û–í–ï–ù–¨ 3: Enrichment** (CoinGecko/GoPlus)
- üíé **–î–û–†–û–ì–û** (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ API calls)
- üéØ –¢–æ–ª—å–∫–æ –¥–ª—è –ª—É—á—à–∏—Ö –ø–æ—Å–ª–µ OnChain —Ñ–∏–ª—å—Ç—Ä–∞
- üìä Market cap, community score, tax checks
- üî¢ Enrichment —Ç–æ–ª—å–∫–æ —Ç–æ–ø-5 —Ç–æ–∫–µ–Ω–æ–≤

### **–£–†–û–í–ï–ù–¨ 4: Final Scoring**
- üßÆ –ü–µ—Ä–µ—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ —Å OnChain –¥–∞–Ω–Ω—ã–º–∏
- ‚ú® –ë–ï–ó –Ω–æ–≤–æ–≥–æ OnChain –∞–Ω–∞–ª–∏–∑–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ —Å –£–†–û–í–ù–Ø 2)
- üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫

### **–£–†–û–í–ï–ù–¨ 5: Alert Generation**
- üö® –§–∏–Ω–∞–ª—å–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
- üì¨ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ª—É—á—à–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö

---

## **üìä –≠–ö–û–ù–û–ú–ò–ß–ï–°–ö–ê–Ø –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–¨**

### **–ü–æ—á–µ–º—É OnChain –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –î–û CoinGecko?**

| –ú–µ—Ç—Ä–∏–∫–∞ | OnChain (–£–†–û–í–ï–ù–¨ 2) | CoinGecko/GoPlus (–£–†–û–í–ï–ù–¨ 3) |
|---------|---------------------|------------------------------|
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | üü¢ –î–µ—à–µ–≤–æ (~5-10 calls/—Ç–æ–∫–µ–Ω) | üî¥ –î–æ—Ä–æ–≥–æ (1 call/—Ç–æ–∫–µ–Ω, –ª–∏–º–∏—Ç) |
| **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** | üü¢ –ö—Ä–∏—Ç–∏—á–Ω–∞—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å!) | üü° –í–∞–∂–Ω–∞—è (–º–µ—Ç—Ä–∏–∫–∏) |
| **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** | üü¢ –£–¥–∞–ª—è–µ—Ç —Å–∫–∞–º—ã | üü° –£—Ç–æ—á–Ω—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ |
| **–ú–∞—Å—à—Ç–∞–±** | üü¢ 20+ —Ç–æ–∫–µ–Ω–æ–≤ | üî¥ 5-10 —Ç–æ–∫–µ–Ω–æ–≤ max |

**–í—ã–≤–æ–¥:** OnChain –†–ê–ù–¨–®–ï = –±–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–∏ —Ç–æ–º –∂–µ –±—é–¥–∂–µ—Ç–µ!

---

## **4. –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ OnChain –∞–Ω–∞–ª–∏–∑–∞**

**–ë—ã–ª–æ (–û–®–ò–ë–ö–ê):**
- –£–†–û–í–ï–ù–¨ 2: OnChain –∞–Ω–∞–ª–∏–∑ ‚ùå
- –£–†–û–í–ï–ù–¨ 4: OnChain –∞–Ω–∞–ª–∏–∑ (–¥—É–±–ª–∏–∫–∞—Ç) ‚ùå

**–°—Ç–∞–ª–æ (–ü–†–ê–í–ò–õ–¨–ù–û):**
- –£–†–û–í–ï–ù–¨ 2: OnChain –∞–Ω–∞–ª–∏–∑ ‚úÖ (–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô)
- –£–†–û–í–ï–ù–¨ 4: Final Scoring ‚úÖ (–ø–µ—Ä–µ—Å—á–µ—Ç —Å OnChain –¥–∞–Ω–Ω—ã–º–∏)

---

## **5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ—Ä–æ–Ω–∫–∏**

**–ë—ã–ª–æ:**
```
–£—Ä–æ–≤–µ–Ω—å 2 (Enrichment): X –æ–±–æ–≥–∞—â–µ–Ω–æ
–£—Ä–æ–≤–µ–Ω—å 4 (OnChain Analysis): 0 API calls  # ‚ùå –û–®–ò–ë–ö–ê
```

**–°—Ç–∞–ª–æ:**
```
–£—Ä–æ–≤–µ–Ω—å 2 (OnChain Analysis): 87 RPC/Etherscan calls  # ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
–£—Ä–æ–≤–µ–Ω—å 3 (Enrichment): 5 –æ–±–æ–≥–∞—â–µ–Ω–æ (CoinGecko/GoPlus)
```

---

## **üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï**

### **–¢–µ—Å—Ç 1: OnChainAgent**

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ OnChainAgent –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç API calls:

```bash
cd C:\Users\annam\Documents\DeFi-RAG-Project\crypto-multi-agent-system
python test_onchain_fix.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –†–µ–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω:
   API calls –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 3  # –ù–ï 0!
   –û–±—â–∏–π —Ä–∏—Å–∫: MODERATE
   –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: PROCEED_WITH_CAUTION

üéâ –£–°–ü–ï–•! OnChainAgent –¥–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã!
```

### **–¢–µ—Å—Ç 2: Full Pipeline**

–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª–Ω—ã–π pipeline:

```bash
python test_funnel_fixes.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–£–†–û–í–ï–ù–¨ 2: OnChain –∞–Ω–∞–ª–∏–∑ - –ì–õ–£–ë–û–ö–ò–ô –º–∞—Å—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏...
   üîç –ì–õ–£–ë–û–ö–ò–ô OnChain –∞–Ω–∞–ª–∏–∑ –¥–ª—è 20 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
   üí∞ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ 87 RPC/Etherscan calls (–¥–µ—à–µ–≤–æ!)
   üõ°Ô∏è –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ 3 —Ç–æ–∫–µ–Ω–æ–≤ —Å CRITICAL —Ä–∏—Å–∫–æ–º rug pull

–£–†–û–í–ï–ù–¨ 3: Enrichment - –¥–æ—Ä–æ–≥–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –ª—É—á—à–∏—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤...
   –û—Ç–æ–±—Ä–∞–Ω–æ 5 –ª—É—á—à–∏—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –¥–ª—è –¥–æ—Ä–æ–≥–æ–≥–æ CoinGecko/GoPlus –∞–Ω–∞–ª–∏–∑–∞
```

---

## **üìñ –ö–õ–Æ–ß–ï–í–´–ï –ü–†–ò–ù–¶–ò–ü–´ –ê–†–•–ò–¢–ï–ö–¢–£–†–´**

### **1. –î–µ—à–µ–≤–æ–µ —Å–Ω–∞—á–∞–ª–∞**
OnChain –∞–Ω–∞–ª–∏–∑ –¥–µ—à–µ–≤–ª–µ ‚Üí –¥–µ–ª–∞–µ–º –µ–≥–æ –ø–µ—Ä–≤—ã–º –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞

### **2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
LP locks –∏ holder concentration - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏—Ö —Ä–∞–Ω–æ

### **3. –î–æ—Ä–æ–≥–æ–µ –≤ –∫–æ–Ω—Ü–µ**
CoinGecko/GoPlus –¥–æ—Ä–æ–≥–∏ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—à–µ–¥—à–∏—Ö OnChain —Ñ–∏–ª—å—Ç—Ä

### **4. –ë–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**
–ö–∞–∂–¥—ã–π –∞–Ω–∞–ª–∏–∑ –¥–µ–ª–∞–µ—Ç—Å—è –û–î–ò–ù –†–ê–ó, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

---

## **‚úÖ –ü–†–û–í–ï–†–û–ß–ù–´–ô –°–ü–ò–°–û–ö**

- [x] OnChainAgent –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç API calls
- [x] Mock —Ä–µ–∂–∏–º –æ—Ç–∫–ª—é—á–µ–Ω –≤ production
- [x] OnChain –∞–Ω–∞–ª–∏–∑ –Ω–∞ –£–†–û–í–ù–ï 2 (–¥–æ CoinGecko)
- [x] CoinGecko/GoPlus –Ω–∞ –£–†–û–í–ù–ï 3 (–ø–æ—Å–ª–µ OnChain —Ñ–∏–ª—å—Ç—Ä–∞)
- [x] –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ OnChain –Ω–∞ –£–†–û–í–ù–ï 4
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ—Ä–æ–Ω–∫–∏
- [x] CRITICAL —Ä–∏—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –Ω–∞ –£–†–û–í–ù–ï 2
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ RPC calls

---

## **üéØ –ò–¢–û–ì**

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** 

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Å–ª–µ–¥—É–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:
1. ‚úÖ –ì–ª—É–±–æ–∫–∏–π OnChain –∞–Ω–∞–ª–∏–∑ —Ä–∞–Ω–æ –≤ –≤–æ—Ä–æ–Ω–∫–µ (–¥–µ—à–µ–≤–æ)
2. ‚úÖ –î–æ—Ä–æ–≥–∏–µ API —Ç–æ–ª—å–∫–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
3. ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ API calls –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
4. ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞

**RPC calls –±–æ–ª—å—à–µ –Ω–µ –±—É–¥—É—Ç 0!** üéâ
