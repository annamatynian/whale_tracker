# =============================================================================
# WHALE TRACKER CONFIGURATION
# =============================================================================
#
# ИНСТРУКЦИИ:
# 1. Скопируйте этот файл: cp .env.example .env
# 2. Замените все YOUR_*_HERE на реальные значения
# 3. НИКОГДА не коммитьте .env файл в git!
#
# =============================================================================

# =============================================================================
# TELEGRAM УВЕДОМЛЕНИЯ (обязательно)
# =============================================================================
TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN_HERE
TELEGRAM_CHAT_ID=YOUR_CHAT_ID_HERE

# Получить токен: https://t.me/BotFather
# Получить Chat ID: https://t.me/userinfobot

# =============================================================================
# BLOCKCHAIN RPC ПРОВАЙДЕРЫ
# =============================================================================
# Система использует cascading failover: Infura -> Alchemy -> Ankr
# Нужен хотя бы INFURA_URL, остальные опциональны но рекомендуются
# Бесплатные варианты:
# - Infura: https://infura.io (3M credits/day)
# - Alchemy: https://alchemy.com (300M compute units/month)
# - Ankr: https://ankr.com (бесплатный публичный RPC)

# Primary RPC (Infura) - обязательно
INFURA_URL=https://mainnet.infura.io/v3/YOUR_PROJECT_ID

# Fallback RPC providers (опционально, но рекомендуется для высокой доступности)
ALCHEMY_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
ANKR_URL=https://rpc.ankr.com/eth/YOUR_ANKR_API_KEY

# =============================================================================
# ETHERSCAN API (для получения списков транзакций)
# =============================================================================
# Получить бесплатные ключи:
# - Ethereum: https://etherscan.io/apis
# - Base: https://basescan.org/apis
# - Arbitrum: https://arbiscan.io/apis
# Free tier: 5 calls/sec, 100,000 calls/day

ETHERSCAN_API_KEY=YOUR_ETHERSCAN_API_KEY_HERE
BASE_ETHERSCAN_API_KEY=YOUR_BASESCAN_API_KEY_HERE
ARBITRUM_ETHERSCAN_API_KEY=YOUR_ARBISCAN_API_KEY_HERE
POLYGON_ETHERSCAN_API_KEY=YOUR_POLYGONSCAN_API_KEY_HERE

# =============================================================================
# COINGECKO API (для получения цен)
# =============================================================================
# Опционально - работает и без ключа, но с лимитами
# Free tier: 10-50 calls/minute
# Pro: https://www.coingecko.com/en/api/pricing

COINGECKO_API_KEY=
# Оставьте пустым для использования без ключа

# =============================================================================
# AI ANALYSIS (NOW IMPLEMENTED - Phase 4)
# =============================================================================
# AI-powered whale analysis with multi-LLM consensus
# Required: DeepSeek (primary analysis)
# Optional: Gemini OR Groq (FREE validators)

# DeepSeek (Primary LLM) - REQUIRED for AI analysis
# Get API key: https://platform.deepseek.com
# Cost: ~$0.0003 per analysis (very cheap)
DEEPSEEK_KEY=sk-your-deepseek-key-here

# Gemini Flash (Validator LLM) - RECOMMENDED (100% FREE)
# Get API key: https://makersuite.google.com/app/apikey
# Free tier: 1,500 requests/day, commercial use allowed
GOOGLE_API_KEY=AIzaSy-your-google-api-key-here

# Groq (Alternative Validator) - OPTIONAL (100% FREE, ULTRA-FAST)
# Get API key: https://console.groq.com
# Free tier: 14,400 requests/day, 300+ tokens/sec
GROQ_API_KEY=gsk_your-groq-api-key-here

# Enable/disable AI analysis
AI_ANALYSIS_ENABLED=true

# Legacy (not used anymore)
OPENAI_API_KEY=
ANTHROPIC_API_KEY=

# =============================================================================
# WHALE TRACKER НАСТРОЙКИ
# =============================================================================

# Адреса китов для мониторинга (через запятую)
# Примеры: известные киты (Vitalik, Tornado Cash deployer и т.д.)
WHALE_ADDRESSES=0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045,0xAb5801a7D398351b8bE11C439e05C5B3259aeC9B

# Основные параметры мониторинга
CHECK_INTERVAL_MINUTES=15          # Как часто проверять китов (минуты)
MIN_AMOUNT_USD=100000              # Минимальная сумма транзакции для алерта ($)

# Anomaly detection thresholds
ANOMALY_MULTIPLIER=1.3             # Множитель для определения аномалии (1.3 = 30% выше среднего)
ALERT_COOLDOWN_MINUTES=60          # Период между алертами для одного кита (минуты)
ONEHOP_CHECK_HOURS=2               # Временное окно для one-hop detection (часы)

# Rolling window for statistical analysis
ROLLING_WINDOW_SIZE=10             # Размер окна для скользящего среднего
MIN_HISTORY_REQUIRED=5             # Минимум транзакций для аномалии

# One-hop tracking
ONEHOP_ENABLED=true                # Включить отслеживание через промежуточные адреса

# Price tracking (Фаза 2 - пока не реализовано)
PRICE_IMPACT_TRACKING_ENABLED=false
PRICE_CHECK_INTERVALS=1,6,24       # Часы после транзакции для проверки цены

# Pattern analysis (Фаза 3 - пока не реализовано)
PATTERN_ANALYSIS_ENABLED=false
MIN_TRANSACTIONS_FOR_PATTERN=5     # Минимум транзакций для построения паттерна

# AI analysis (Phase 4 - NOW IMPLEMENTED)
AI_ANALYSIS_ENABLED=true

# =============================================================================
# DATABASE (Phase 2 - NOW IMPLEMENTED)
# =============================================================================
# Поддержка PostgreSQL для хранения one-hop detections, transactions, analytics
# Установка PostgreSQL: https://www.postgresql.org/download/

# Database type (sqlite | postgresql)
DB_TYPE=sqlite

# SQLite (простая опция для локального развертывания)
SQLITE_PATH=data/database/whale_tracker.db

# PostgreSQL (рекомендуется для production)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=whale_tracker
DB_USER=postgres
DB_PASSWORD=YOUR_DB_PASSWORD_HERE

# Connection pool settings
DB_POOL_SIZE=5                     # Размер connection pool
DB_MAX_OVERFLOW=10                 # Максимум дополнительных соединений
DB_ECHO=false                      # Echo SQL queries (для debugging)

# Legacy DATABASE_URL (автоматически генерируется из настроек выше)
# DATABASE_URL=postgresql://postgres:password@localhost:5432/whale_tracker

# =============================================================================
# СИСТЕМА
# =============================================================================
ENVIRONMENT=development            # development, staging, production
LOG_LEVEL=INFO                    # DEBUG, INFO, WARNING, ERROR
LOG_TO_FILE=true                  # Сохранять логи в файлы (logs/)
LOG_MAX_SIZE_MB=10                # Максимальный размер лог-файла (MB)
LOG_BACKUP_COUNT=5                # Количество backup файлов логов

# Development settings
MOCK_DATA_MODE=false              # true = использовать mock данные вместо реальных API вызовов

# =============================================================================
# RATE LIMITS (защита от превышения лимитов API)
# =============================================================================
MAX_API_CALLS_PER_MINUTE=50
ETHERSCAN_RATE_LIMIT_DELAY=0.2    # Секунды между вызовами
RPC_RATE_LIMIT_DELAY=0.1          # Секунды между вызовами

# =============================================================================
# БЕЗОПАСНОСТЬ
# =============================================================================
# Опционально - для будущего расширения
JWT_SECRET=
ENCRYPTION_KEY=

# =============================================================================
# БЫСТРЫЙ СТАРТ ДЛЯ MVP
# =============================================================================
#
# Для работы текущего MVP достаточно установить:
#
# ОБЯЗАТЕЛЬНО:
# 1. TELEGRAM_BOT_TOKEN        - Получить у @BotFather
# 2. TELEGRAM_CHAT_ID          - Получить у @userinfobot
# 3. INFURA_URL                - Зарегистрироваться на https://infura.io
# 4. WHALE_ADDRESSES           - Адреса китов для мониторинга
#
# РЕКОМЕНДУЕТСЯ:
# 5. ALCHEMY_URL               - Fallback RPC provider
# 6. ANKR_URL                  - Еще один fallback
#
# ОПЦИОНАЛЬНО (для расширенных функций):
# - ETHERSCAN_API_KEY          - Для получения истории транзакций (Phase 2+)
# - COINGECKO_API_KEY          - Для отслеживания цен (Phase 2+)
# - DATABASE_URL               - Для хранения данных (Phase 2+)

# AI ANALYSIS (Phase 4 - NOW IMPLEMENTED):
# - DEEPSEEK_KEY               - REQUIRED для AI анализа китов
# - GOOGLE_API_KEY             - RECOMMENDED для валидации (FREE)
# - GROQ_API_KEY               - Альтернативный валидатор (FREE, очень быстрый)
#
# YAML CONFIGURATION:
# Основная конфигурация хранится в config/base.yaml
# Environment overrides в config/environments/{development,production}.yaml
# .env переменные имеют наивысший приоритет и переопределяют YAML
#
# =============================================================================
